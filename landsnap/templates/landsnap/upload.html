{% extends "landsnap/base.html" %}
{% load static %}

{% block content %}
<div class="upload-container">
  <div class="logo-header">
    <img src="{% static 'landsnap/img/logo.png' %}" 
         alt="LandSnap Logo" 
         class="logo"
         width="200"
         height="80"
         loading="lazy"
         >
         <link rel="stylesheet" href="{% static 'landsnap/css/styles.css' %}">
    <h1 class="main-heading">Land Change Analysis</h1>
  </div>

  <div class="upload-card">
    <h2 class="section-heading">Upload Images for Analysis</h2>
    <p class="instruction-text">Upload two images of the same location taken at different times</p>
    
    <form id="analysis-form" class="upload-form" method="post" enctype="multipart/form-data" novalidate aria-labelledby="form-heading">
      {% csrf_token %}
      
      <div class="form-columns">
        <div class="form-group">
          <label for="id_image1" class="upload-label">
            <span class="label-text">Before Image</span>
            <span class="upload-hint">(JPEG or PNG, max 5MB)</span>
          </label>
          {{ form.image1 }}
          <div class="preview-container" id="preview-container-1">
            <img id="id_image1-preview" class="image-preview" alt="Before preview" aria-hidden="true">
            <div class="preview-placeholder" id="placeholder-1">
              <svg class="placeholder-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
              <span>Preview will appear here</span>
            </div>
          </div>
          <div class="error-message" id="error-image1" role="alert" aria-live="assertive"></div>
        </div>
        
        <div class="form-group">
          <label for="id_image2" class="upload-label">
            <span class="label-text">After Image</span>
            <span class="upload-hint">(JPEG or PNG, max 5MB)</span>
          </label>
          {{ form.image2 }}
          <div class="preview-container" id="preview-container-2">
            <img id="id_image2-preview" class="image-preview" alt="After preview" aria-hidden="true">
            <div class="preview-placeholder" id="placeholder-2">
              <svg class="placeholder-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
              <span>Preview will appear here</span>
            </div>
          </div>
          <div class="error-message" id="error-image2" role="alert" aria-live="assertive"></div>
        </div>
      </div>
      
      <div class="form-footer">
        <button type="submit" class="btn btn-primary" id="analyze-btn" aria-live="polite">
          <span class="btn-text" id="btn-text">Analyze Images</span>
          <span class="spinner" id="submit-spinner" aria-hidden="true"></span>
        </button>
      </div>
    </form>
  </div>
</div>
<script src="{% static 'landsnap/js/main.js' %}" defer></script>
{% endblock %}
